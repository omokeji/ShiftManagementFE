<!-- meta tags and other links -->
<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MaxiCare Admin Booking</title>
  <link rel="icon" type="image/png" href="assets/images/favicon.png" sizes="16x16">
  <!-- remix icon font css  -->
  <link rel="stylesheet" href="assets/css/remixicon.css">
  <!-- BootStrap css -->
  <link rel="stylesheet" href="assets/css/lib/bootstrap.min.css">
  <!-- Apex Chart css -->
  <link rel="stylesheet" href="assets/css/lib/apexcharts.css">
  <!-- Data Table css -->
  <link rel="stylesheet" href="assets/css/lib/dataTables.min.css">
  <!-- Text Editor css -->
  <link rel="stylesheet" href="assets/css/lib/editor-katex.min.css">
  <link rel="stylesheet" href="assets/css/lib/editor.atom-one-dark.min.css">
  <link rel="stylesheet" href="assets/css/lib/editor.quill.snow.css">
  <!-- Date picker css -->
  <link rel="stylesheet" href="assets/css/lib/flatpickr.min.css">
  <!-- Calendar css -->
  <link rel="stylesheet" href="assets/css/lib/full-calendar.css">
  <!-- Vector Map css -->
  <link rel="stylesheet" href="assets/css/lib/jquery-jvectormap-2.0.5.css">
  <!-- Popup css -->
  <link rel="stylesheet" href="assets/css/lib/magnific-popup.css">
  <!-- Slick Slider css -->
  <link rel="stylesheet" href="assets/css/lib/slick.css">
  <!-- prism css -->
  <link rel="stylesheet" href="assets/css/lib/prism.css">
  <!-- file upload css -->
  <link rel="stylesheet" href="assets/css/lib/file-upload.css">

  <link rel="stylesheet" href="assets/css/lib/audioplayer.css">
  <!-- main css -->
  <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
  <aside class="sidebar">
    <button type="button" class="sidebar-close-btn">
      <iconify-icon icon="radix-icons:cross-2"></iconify-icon>
    </button>
    <div>
      <a href="index.html" class="sidebar-logo">
        <img src="assets/images/logo.png" alt="site logo" class="light-logo">
        <img src="assets/images/logo-light.png" alt="site logo" class="dark-logo">
        <img src="assets/images/logo-icon.png" alt="site logo" class="logo-icon">
      </a>
    </div>
    <div class="sidebar-menu-area">
      <ul class="sidebar-menu" id="sidebar-menu">
        <li>
          <a href="index.html">
            <iconify-icon icon="solar:home-smile-angle-outline" class="menu-icon"></iconify-icon>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="javascript:void(0)" class="disabled-link" style="opacity: 0.5; cursor: not-allowed;">
            <iconify-icon icon="solar:calendar-outline" class="menu-icon"></iconify-icon>
            <span>Calendar (Disabled)</span>
          </a>
        </li>
        <li class="dropdown admin-only">
          <a href="javascript:void(0)">
            <iconify-icon icon="flowbite:users-group-outline" class="menu-icon"></iconify-icon>
            <span>Users</span>
          </a>
          <ul class="sidebar-submenu">
            <li>
              <a href="users-list.html"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> Users
                List</a>
            </li>
            <li>
              <a href="add-user.html"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> Add User</a>
            </li>
          </ul>
        </li>

        <li class="employee-only">
          <a href="view-profile.html">
            <iconify-icon icon="solar:user-linear" class="menu-icon"></iconify-icon>
            <span>My Profile</span>
          </a>
        </li>

        <li class="dropdown admin-only">
          <a href="javascript:void(0)">
            <i class="ri-user-settings-line text-xl me-14 d-flex w-auto"></i>
            <span>Role & Access</span>
          </a>
          <ul class="sidebar-submenu">
            <li>
              <a href="role-access.html"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> Role & Access</a>
            </li>
            <li>
              <a href="assign-role.html"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> Assign Role</a>
            </li>
          </ul>
        </li>

        <li class="dropdown admin-only">
          <a href="javascript:void(0)">
            <iconify-icon icon="solar:briefcase-outline" class="menu-icon"></iconify-icon>
            <span>Job Types</span>
          </a>
          <ul class="sidebar-submenu">
            <li>
              <a href="job-types.html"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> Job Types List</a>
            </li>
            <li>
              <a href="add-job-type.html"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> Add Job Type</a>
            </li>
          </ul>
        </li>

        <li class="dropdown admin-only">
          <a href="javascript:void(0)">
            <iconify-icon icon="solar:clock-circle-outline" class="menu-icon"></iconify-icon>
            <span>Shift Management</span>
          </a>
          <ul class="sidebar-submenu">
            <li>
              <a href="add-shift.html"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> Add Shift</a>
            </li>
            <li>
              <a href="view-shifts.html"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> View Shifts</a>
            </li>
          <li>
            <a href="clock-change-requests.html"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> Clock Change Requests</a>
          </li>
          <li>
            <a href="javascript:void(0)" onclick="showShiftReports()"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> Shift Reports</a>
          </li>
        </ul>
      </li>

        <li class="employee-only">
          <a href="my-shifts.html">
            <iconify-icon icon="solar:clock-circle-outline" class="menu-icon"></iconify-icon>
            <span>My Shifts</span>
          </a>
        </li>

        <li class="employee-only">
          <a href="available-shifts.html">
            <iconify-icon icon="solar:calendar-add-outline" class="menu-icon"></iconify-icon>
            <span>Available Shifts</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>

  <main class="dashboard-main">
    <div class="navbar-header">
      <div class="row align-items-center justify-content-between">
        <div class="col-auto">
          <div class="d-flex flex-wrap align-items-center gap-4">
            <button type="button" class="sidebar-toggle">
              <iconify-icon icon="heroicons:bars-3-solid" class="icon text-2xl non-active"></iconify-icon>
              <iconify-icon icon="iconoir:arrow-right" class="icon text-2xl active"></iconify-icon>
            </button>
            <button type="button" class="sidebar-mobile-toggle">
              <iconify-icon icon="heroicons:bars-3-solid" class="icon"></iconify-icon>
            </button>
            <form class="navbar-search">
              <input type="text" name="search" placeholder="Search">
              <iconify-icon icon="ion:search-outline" class="icon"></iconify-icon>
            </form>
          </div>
        </div>
        <div class="col-auto">
          <div class="d-flex flex-wrap align-items-center gap-3">
            <button type="button" data-theme-toggle
              class="w-40-px h-40-px bg-neutral-200 rounded-circle d-flex justify-content-center align-items-center"></button>

            <div class="dropdown">
              <button
                class="has-indicator w-40-px h-40-px bg-neutral-200 rounded-circle d-flex justify-content-center align-items-center"
                type="button" data-bs-toggle="dropdown">
                <iconify-icon icon="iconoir:bell" class="text-primary-light text-xl"></iconify-icon>
              </button>
              <div class="dropdown-menu to-top dropdown-menu-lg p-0">
                <div
                  class="m-16 py-12 px-16 radius-8 bg-primary-50 mb-16 d-flex align-items-center justify-content-between gap-2">
                  <div>
                    <h6 class="text-lg text-primary-light fw-semibold mb-0">Notifications</h6>
                  </div>
                  <span
                    class="text-primary-600 fw-semibold text-lg w-40-px h-40-px rounded-circle bg-base d-flex justify-content-center align-items-center" id="notificationCount">0</span>
                </div>

                
                <div class="max-h-400-px overflow-y-auto scroll-sm pe-4" id="notificationsList">
                  <!-- Notifications will be loaded here -->
                  <div class="text-center py-3">
                    <div class="spinner-border text-primary" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-secondary-light text-sm">Loading notifications...</p>
                  </div>
                </div>

                <div class="text-center py-12 px-16">
                  <a href="javascript:void(0)" class="text-primary-600 fw-semibold text-md">See All Notification</a>
                </div>

              </div>
            </div><!-- Notification dropdown end -->

            <div class="dropdown">
              <button class="d-flex justify-content-center align-items-center rounded-circle" type="button"
                data-bs-toggle="dropdown">
                <img src="assets/images/user.png" alt="image" class="w-40-px h-40-px object-fit-cover rounded-circle">
              </button>
              <div class="dropdown-menu to-top dropdown-menu-sm">
                <div
                  class="py-12 px-16 radius-8 bg-primary-50 mb-16 d-flex align-items-center justify-content-between gap-2">
                  <div>
                    <h6 class="text-lg text-primary-light fw-semibold mb-2">Shaidul Islam</h6>
                    <span class="text-secondary-light fw-medium text-sm">Admin</span>
                  </div>
                  <button type="button" class="hover-text-danger">
                    <iconify-icon icon="radix-icons:cross-1" class="icon text-xl"></iconify-icon>
                  </button>
                </div>
                <ul class="to-top-list">
                  <li>
                    <a class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-primary d-flex align-items-center gap-3"
                      href="view-profile.html">
                      <iconify-icon icon="solar:user-linear" class="icon text-xl"></iconify-icon> My Profile</a>
                  </li>
                  <li>
                    <a class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-primary d-flex align-items-center gap-3"
                      href="email.html">
                      <iconify-icon icon="tabler:message-check" class="icon text-xl"></iconify-icon> Inbox</a>
                  </li>
                  <li>
                    <a class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-primary d-flex align-items-center gap-3"
                      href="company.html">
                      <iconify-icon icon="icon-park-outline:setting-two" class="icon text-xl"></iconify-icon>
                      Setting</a>
                  </li>
                  <li>
                    <a class="dropdown-item text-black px-0 py-8 hover-bg-transparent hover-text-danger d-flex align-items-center gap-3"
                      href="javascript:void(0)" id="logoutBtn">
                      <iconify-icon icon="lucide:power" class="icon text-xl"></iconify-icon> Log Out</a>
                  </li>
                </ul>
              </div>
            </div><!-- Profile dropdown end -->
          </div>
        </div>
      </div>
    </div>

    <div class="dashboard-main-body">
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24">
        <h6 class="fw-semibold mb-0">View Profile</h6>
        <ul class="d-flex align-items-center gap-2">
          <li class="fw-medium">
            <a href="index.html" class="d-flex align-items-center gap-1 hover-text-primary">
              <iconify-icon icon="solar:home-smile-angle-outline" class="icon text-lg"></iconify-icon>
              Dashboard
            </a>
          </li>
          <li>-</li>
          <li class="fw-medium">View Profile</li>
        </ul>
      </div>

      <div class="row gy-4">
        <div class="col-lg-4">
          <div class="user-grid-card position-relative border radius-16 overflow-hidden bg-base h-100">
            <img src="assets/images/user-grid/user-grid-bg1.png" alt="" class="w-100 object-fit-cover">
            <div class="pb-24 ms-16 mb-24 me-16  mt--100">
              <div class="text-center border border-top-0 border-start-0 border-end-0">
                <img src="assets/images/user-grid/user-grid-img14.png" alt=""
                  class="border br-white border-width-2-px w-200-px h-200-px rounded-circle object-fit-cover">
                <h6 class="mb-0 mt-16">Jacob Jones</h6>
                <span class="text-secondary-light mb-16">ifrandom@gmail.com</span>
              </div>
              <div class="mt-24">
                <h6 class="text-xl mb-16">Personal Info</h6>
                <ul>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light">Full Name</span>
                    <span class="w-70 text-secondary-light fw-medium">: </span>
                  </li>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light"> Email</span>
                    <span class="w-70 text-secondary-light fw-medium">: </span>
                  </li>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light">Email Status</span>
                    <span class="w-70 text-secondary-light fw-medium d-flex align-items-center gap-2">
                      <span id="emailStatusText">: Not Verified</span>
                      <span id="emailStatusIcon" class="text-warning">
                        <iconify-icon icon="solar:shield-warning-outline"></iconify-icon>
                      </span>
                      <button id="resendVerificationBtn" class="btn btn-sm btn-outline-primary" style="display: none;">
                        Resend
                      </button>
                    </span>
                  </li>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light"> Phone Number</span>
                    <span class="w-70 text-secondary-light fw-medium">: </span>
                  </li>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light"> Department</span>
                    <span class="w-70 text-secondary-light fw-medium">: </span>
                  </li>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light"> Designation</span>
                    <span class="w-70 text-secondary-light fw-medium">: </span>
                  </li>
                  <li class="d-flex align-items-center gap-1 mb-12">
                    <span class="w-30 text-md fw-semibold text-primary-light"> Languages</span>
                    <span class="w-70 text-secondary-light fw-medium">: English</span>
                  </li>
                  <li class="d-flex align-items-center gap-1">
                    <span class="w-30 text-md fw-semibold text-primary-light"> Bio</span>
                    <span class="w-70 text-secondary-light fw-medium">: </span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="card h-100">
            <div class="card-body p-24">
              <ul class="nav border-gradient-tab nav-pills mb-20 d-inline-flex" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link d-flex align-items-center px-24 active" id="pills-edit-profile-tab"
                    data-bs-toggle="pill" data-bs-target="#pills-edit-profile" type="button" role="tab"
                    aria-controls="pills-edit-profile" aria-selected="true">
                    Edit Profile
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link d-flex align-items-center px-24" id="pills-change-passwork-tab"
                    data-bs-toggle="pill" data-bs-target="#pills-change-passwork" type="button" role="tab"
                    aria-controls="pills-change-passwork" aria-selected="false" tabindex="-1">
                    Change Password
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link d-flex align-items-center px-24" id="pills-notification-tab"
                    data-bs-toggle="pill" data-bs-target="#pills-notification" type="button" role="tab"
                    aria-controls="pills-notification" aria-selected="false" tabindex="-1">
                    Notification Settings
                  </button>
                </li>
              </ul>

              <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-edit-profile" role="tabpanel"
                  aria-labelledby="pills-edit-profile-tab" tabindex="0">
                  <h6 class="text-md text-primary-light mb-16">Profile Image</h6>
                  <!-- Upload Image Start -->
                  <div class="mb-24 mt-16">
                    <div class="avatar-upload">
                      <div class="avatar-edit position-absolute bottom-0 end-0 me-24 mt-16 z-1 cursor-pointer">
                        <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" hidden>
                        <label for="imageUpload"
                          class="w-32-px h-32-px d-flex justify-content-center align-items-center bg-primary-50 text-primary-600 border border-primary-600 bg-hover-primary-100 text-lg rounded-circle">
                          <iconify-icon icon="solar:camera-outline" class="icon"></iconify-icon>
                        </label>
                      </div>
                      <div class="avatar-preview">
                        <div id="imagePreview">
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Upload Image End -->
                  <form action="#">
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="mb-20">
                          <label for="name" class="form-label fw-semibold text-primary-light text-sm mb-8">Full Name
                            <span class="text-danger-600">*</span></label>
                          <input type="text" class="form-control radius-8" id="name" placeholder="Enter Full Name">
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="mb-20">
                          <label for="email" class="form-label fw-semibold text-primary-light text-sm mb-8">Email <span
                              class="text-danger-600">*</span></label>
                          <input type="email" class="form-control radius-8" id="email"
                            placeholder="Enter email address">
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="mb-20">
                          <label for="number"
                            class="form-label fw-semibold text-primary-light text-sm mb-8">Phone</label>
                          <input type="email" class="form-control radius-8" id="number"
                            placeholder="Enter phone number">
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="mb-20">
                          <label for="depart" class="form-label fw-semibold text-primary-light text-sm mb-8">Department
                            <span class="text-danger-600">*</span> </label>
                          <select class="form-control radius-8 form-select" id="depart">
                            <option>Enter Event Title </option>
                            <option>Enter Event Title One </option>
                            <option>Enter Event Title Two</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="mb-20">
                          <label for="desig" class="form-label fw-semibold text-primary-light text-sm mb-8">Designation
                            <span class="text-danger-600">*</span> </label>
                          <select class="form-control radius-8 form-select" id="desig">
                            <option>Enter Designation Title </option>
                            <option>Enter Designation Title One </option>
                            <option>Enter Designation Title Two</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="mb-20">
                          <label for="Language" class="form-label fw-semibold text-primary-light text-sm mb-8">Language
                            <span class="text-danger-600">*</span> </label>
                          <select class="form-control radius-8 form-select" id="Language">
                            <option> English</option>
                            <option> Bangla </option>
                            <option> Hindi</option>
                            <option> Arabic</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-sm-12">
                        <div class="mb-20">
                          <label for="desc"
                            class="form-label fw-semibold text-primary-light text-sm mb-8">Description</label>
                          <textarea name="#0" class="form-control radius-8" id="desc"
                            placeholder="Write description..."></textarea>
                        </div>
                      </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-center gap-3">
                      <button type="button"
                        class="border border-danger-600 bg-hover-danger-200 text-danger-600 text-md px-56 py-11 radius-8">
                        Cancel
                      </button>
                      <button type="button"
                        class="btn btn-primary border border-primary-600 text-md px-56 py-12 radius-8">
                        Save
                      </button>
                    </div>
                  </form>
                </div>

                <div class="tab-pane fade" id="pills-change-passwork" role="tabpanel"
                  aria-labelledby="pills-change-passwork-tab" tabindex="0">
                  <form id="changePasswordForm">
                    <div class="mb-20">
                      <label for="current-password" class="form-label fw-semibold text-primary-light text-sm mb-8">Current
                        Password <span class="text-danger-600">*</span></label>
                      <div class="position-relative">
                        <input type="password" class="form-control radius-8" id="current-password"
                          placeholder="Enter Current Password*" required>
                        <span
                          class="toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light"
                          data-toggle="#current-password"></span>
                      </div>
                    </div>
                    <div class="mb-20">
                      <label for="your-password" class="form-label fw-semibold text-primary-light text-sm mb-8">New
                        Password <span class="text-danger-600">*</span></label>
                      <div class="position-relative">
                        <input type="password" class="form-control radius-8" id="your-password"
                          placeholder="Enter New Password*" required>
                        <span
                          class="toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light"
                          data-toggle="#your-password"></span>
                      </div>
                    </div>
                    <div class="mb-20">
                      <label for="confirm-password"
                        class="form-label fw-semibold text-primary-light text-sm mb-8">Confirm New Password <span
                          class="text-danger-600">*</span></label>
                      <div class="position-relative">
                        <input type="password" class="form-control radius-8" id="confirm-password"
                          placeholder="Confirm New Password*" required>
                        <span
                          class="toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light"
                          data-toggle="#confirm-password"></span>
                      </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-center gap-3">
                      <button type="button" class="btn btn-outline-secondary px-56 py-12 radius-8" onclick="clearPasswordForm()">
                        Cancel
                      </button>
                      <button type="submit" class="btn btn-primary px-56 py-12 radius-8">
                        Change Password
                      </button>
                    </div>
                  </form>
                </div>

                <div class="tab-pane fade" id="pills-notification" role="tabpanel"
                  aria-labelledby="pills-notification-tab" tabindex="0">
                  <div class="form-switch switch-primary py-12 px-16 border radius-8 position-relative mb-16">
                    <label for="companzNew" class="position-absolute w-100 h-100 start-0 top-0"></label>
                    <div class="d-flex align-items-center gap-3 justify-content-between">
                      <span class="form-check-label line-height-1 fw-medium text-secondary-light">Company News</span>
                      <input class="form-check-input" type="checkbox" role="switch" id="companzNew">
                    </div>
                  </div>
                  <div class="form-switch switch-primary py-12 px-16 border radius-8 position-relative mb-16">
                    <label for="pushNotifcation" class="position-absolute w-100 h-100 start-0 top-0"></label>
                    <div class="d-flex align-items-center gap-3 justify-content-between">
                      <span class="form-check-label line-height-1 fw-medium text-secondary-light">Push
                        Notification</span>
                      <input class="form-check-input" type="checkbox" role="switch" id="pushNotifcation" checked>
                    </div>
                  </div>
                  <div class="form-switch switch-primary py-12 px-16 border radius-8 position-relative mb-16">
                    <label for="weeklyLetters" class="position-absolute w-100 h-100 start-0 top-0"></label>
                    <div class="d-flex align-items-center gap-3 justify-content-between">
                      <span class="form-check-label line-height-1 fw-medium text-secondary-light">Weekly News
                        Letters</span>
                      <input class="form-check-input" type="checkbox" role="switch" id="weeklyLetters" checked>
                    </div>
                  </div>
                  <div class="form-switch switch-primary py-12 px-16 border radius-8 position-relative mb-16">
                    <label for="meetUp" class="position-absolute w-100 h-100 start-0 top-0"></label>
                    <div class="d-flex align-items-center gap-3 justify-content-between">
                      <span class="form-check-label line-height-1 fw-medium text-secondary-light">Meetups Near
                        you</span>
                      <input class="form-check-input" type="checkbox" role="switch" id="meetUp">
                    </div>
                  </div>
                  <div class="form-switch switch-primary py-12 px-16 border radius-8 position-relative mb-16">
                    <label for="orderNotification" class="position-absolute w-100 h-100 start-0 top-0"></label>
                    <div class="d-flex align-items-center gap-3 justify-content-between">
                      <span class="form-check-label line-height-1 fw-medium text-secondary-light">Orders
                        Notifications</span>
                      <input class="form-check-input" type="checkbox" role="switch" id="orderNotification" checked>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="d-footer">
      <div class="row align-items-center justify-content-between">
        <div class="col-auto">
          <p class="mb-0">© 2024 MaxiCare Admin Booking. All Rights Reserved.</p>
        </div>
        <div class="col-auto">
          <p class="mb-0">Made by <span class="text-primary-600">MaxiCare Team</span></p>
        </div>
      </div>
    </footer>
  </main>

  <!-- jQuery library js -->
  <script src="assets/js/lib/jquery-3.7.1.min.js"></script>
  <!-- Bootstrap js -->
  <script src="assets/js/lib/bootstrap.bundle.min.js"></script>
  <!-- Apex Chart js -->
  <script src="assets/js/lib/apexcharts.min.js"></script>
  <!-- Data Table js -->
  <script src="assets/js/lib/dataTables.min.js"></script>
  <!-- Iconify Font js -->
  <script src="assets/js/lib/iconify-icon.min.js"></script>
  <!-- jQuery UI js -->
  <script src="assets/js/lib/jquery-ui.min.js"></script>
  <!-- Vector Map js -->
  <script src="assets/js/lib/jquery-jvectormap-2.0.5.min.js"></script>
  <script src="assets/js/lib/jquery-jvectormap-world-mill-en.js"></script>
  <!-- Popup js -->
  <script src="assets/js/lib/magnifc-popup.min.js"></script>
  <!-- Slick Slider js -->
  <script src="assets/js/lib/slick.min.js"></script>
  <!-- prism js -->
  <script src="assets/js/lib/prism.js"></script>
  <!-- file upload js -->
  <script src="assets/js/lib/file-upload.js"></script>
  <!-- audioplayer -->
  <script src="assets/js/lib/audioplayer.js"></script>

  <!-- API and Auth services -->
  <script src="assets/js/api.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/router.js"></script>
  <!-- main js -->
  <script src="assets/js/app.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Apply role-based access control
      applyRoleBasedAccess();
    });

    function applyRoleBasedAccess() {
      const currentUser = authService.getCurrentUser();
      if (!currentUser) {
        // Redirect to login if no user
        window.location.href = 'sign-in.html';
        return;
      }

      const isAdmin = currentUser.role === 'admin';
      const isUser = currentUser.role === 'user' || currentUser.role === 'employee';

      // Show/hide admin-only elements
      const adminElements = document.querySelectorAll('.admin-only');
      adminElements.forEach(element => {
        element.style.display = isAdmin ? 'block' : 'none';
      });

      // Show/hide employee-only elements
      const employeeElements = document.querySelectorAll('.employee-only');
      employeeElements.forEach(element => {
        element.style.display = isUser ? 'block' : 'none';
      });

      // Update user info in dropdown
      const userNameElement = document.querySelector('.user-name');
      const userRoleElement = document.querySelector('.user-role');
      if (userNameElement) userNameElement.textContent = `${currentUser.firstname} ${currentUser.lastname}`;
      if (userRoleElement) userRoleElement.textContent = currentUser.role.charAt(0).toUpperCase() + currentUser.role.slice(1);
    }
  </script>

  <script>
    let currentUser = null;

    document.addEventListener('DOMContentLoaded', async function() {
      // Check authentication
      if (!authService.requireAuth()) {
        return;
      }

      // Get current user data
      currentUser = authService.getCurrentUser();
      if (!currentUser) {
        alert('User data not found. Please login again.');
        window.location.href = 'sign-in.html';
        return;
      }

      // Load user profile data
      await loadUserProfile();

      // Load notifications
      await loadNotifications();

      // Add logout functionality
      document.getElementById('logoutBtn').addEventListener('click', async function() {
        await authService.logout();
        window.location.href = 'sign-in.html';
      });

      // Form submission handlers
      document.querySelector('#pills-edit-profile form').addEventListener('submit', handleProfileUpdate);
      document.getElementById('changePasswordForm').addEventListener('submit', handlePasswordChange);
    });

    async function loadUserProfile() {
      try {
        const response = await maxicareAPI.getUser(currentUser.id);
        if (response.status) {
          const user = response.data;
          populateProfileData(user);
        }
      } catch (error) {
        console.error('Error loading user profile:', error);
        showAlert('Error loading profile data', 'danger');
      }
    }

    function populateProfileData(user) {
      // Update profile card
      document.querySelector('.user-grid-card h6').textContent = `${user.firstname} ${user.lastname}`;
      document.querySelector('.user-grid-card span').textContent = user.email;
      
      // Update personal info
      const personalInfoItems = document.querySelectorAll('.user-grid-card ul li');
      if (personalInfoItems.length >= 8) {
        personalInfoItems[0].querySelector('.w-70').textContent = `: ${user.firstname} ${user.lastname}`;
        personalInfoItems[1].querySelector('.w-70').textContent = `: ${user.email}`;
        
        // Update email verification status
        updateEmailVerificationStatus(user.isConfirmed);
        
        personalInfoItems[3].querySelector('.w-70').textContent = `: ${user.phone || 'Not provided'}`;
        personalInfoItems[4].querySelector('.w-70').textContent = `: ${user.team || 'Not assigned'}`;
        personalInfoItems[5].querySelector('.w-70').textContent = `: ${user.title || 'Not provided'}`;
        personalInfoItems[6].querySelector('.w-70').textContent = `: English`;
        personalInfoItems[7].querySelector('.w-70').textContent = `: ${user.title || 'Healthcare professional'}`;
      }

      // Populate edit form
      document.getElementById('name').value = `${user.firstname} ${user.lastname}`;
      document.getElementById('email').value = user.email;
      document.getElementById('number').value = user.phone || '';
      document.getElementById('depart').value = user.team || '';
      document.getElementById('desig').value = user.title || '';
      document.getElementById('desc').value = user.title || '';
    }

    function updateEmailVerificationStatus(isConfirmed) {
      const statusText = document.getElementById('emailStatusText');
      const statusIcon = document.getElementById('emailStatusIcon');
      const resendBtn = document.getElementById('resendVerificationBtn');

      if (isConfirmed) {
        statusText.textContent = ': Verified';
        statusIcon.className = 'text-success';
        statusIcon.innerHTML = '<iconify-icon icon="solar:shield-check-outline"></iconify-icon>';
        resendBtn.style.display = 'none';
      } else {
        statusText.textContent = ': Not Verified';
        statusIcon.className = 'text-warning';
        statusIcon.innerHTML = '<iconify-icon icon="solar:shield-warning-outline"></iconify-icon>';
        resendBtn.style.display = 'inline-block';
      }
    }

    // Resend verification email
    document.getElementById('resendVerificationBtn').addEventListener('click', async function() {
      const currentUser = authService.getCurrentUser();
      if (!currentUser) return;

      const btn = this;
      const originalText = btn.textContent;
      
      btn.disabled = true;
      btn.textContent = 'Sending...';

      try {
        const result = await maxicareAPI.resendConfirmation(currentUser.email);

        if (result.success) {
          showAlert('Verification email sent! Please check your inbox.', 'success');
        } else {
          showAlert(result.message || 'Failed to resend verification email.', 'danger');
        }
      } catch (error) {
        console.error('Resend verification error:', error);
        showAlert(error.message || 'An error occurred. Please try again.', 'danger');
      } finally {
        btn.disabled = false;
        btn.textContent = originalText;
      }
    });

    async function handleProfileUpdate(e) {
      e.preventDefault();
      
      try {
        const formData = {
          firstname: document.getElementById('name').value.split(' ')[0],
          lastname: document.getElementById('name').value.split(' ').slice(1).join(' '),
          email: document.getElementById('email').value,
          phone: document.getElementById('number').value,
          team: document.getElementById('depart').value,
          title: document.getElementById('desig').value
        };

        const response = await maxicareAPI.updateUser(currentUser.id, formData);
        if (response.status) {
          showAlert('Profile updated successfully', 'success');
          await loadUserProfile(); // Reload profile data
        } else {
          showAlert('Error updating profile: ' + response.message, 'danger');
        }
      } catch (error) {
        console.error('Error updating profile:', error);
        showAlert('Error updating profile', 'danger');
      }
    }

    async function handlePasswordChange(e) {
      e.preventDefault();
      
      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('your-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;

      // Validation
      if (!currentPassword) {
        showAlert('Please enter your current password', 'warning');
        return;
      }

      if (!newPassword) {
        showAlert('Please enter a new password', 'warning');
        return;
      }

      if (newPassword !== confirmPassword) {
        showAlert('New passwords do not match', 'warning');
        return;
      }

      if (newPassword.length < 8) {
        showAlert('New password must be at least 8 characters long', 'warning');
        return;
      }

      if (currentPassword === newPassword) {
        showAlert('New password must be different from current password', 'warning');
        return;
      }

      try {
        console.log('=== FRONTEND CHANGE PASSWORD DEBUG ===');
        console.log('Current password:', currentPassword ? 'PROVIDED' : 'NOT PROVIDED');
        console.log('New password:', newPassword ? 'PROVIDED' : 'NOT PROVIDED');
        console.log('Confirm password:', confirmPassword ? 'PROVIDED' : 'NOT PROVIDED');
        
        const response = await maxicareAPI.changePassword(currentPassword, newPassword);
        console.log('API Response:', response);
        
        if (response.status) {
          showAlert('Password changed successfully', 'success');
          clearPasswordForm();
        } else {
          showAlert('Error changing password: ' + response.message, 'danger');
        }
      } catch (error) {
        console.error('Error changing password:', error);
        showAlert('Error changing password: ' + (error.message || 'Please check your current password'), 'danger');
      }
    }

    function clearPasswordForm() {
      document.getElementById('current-password').value = '';
      document.getElementById('your-password').value = '';
      document.getElementById('confirm-password').value = '';
    }

    function showAlert(message, type) {
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
      alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
      alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      `;
      document.body.appendChild(alertDiv);

      // Auto remove after 5 seconds
      setTimeout(() => {
        if (alertDiv.parentNode) {
          alertDiv.parentNode.removeChild(alertDiv);
        }
      }, 5000);
    }

    // ======================== Upload Image Start =====================
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#imagePreview').css('background-image', 'url(' + e.target.result + ')');
          $('#imagePreview').hide();
          $('#imagePreview').fadeIn(650);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $("#imageUpload").change(function () {
      readURL(this);
    });
    // ======================== Upload Image End =====================

    // ================== Password Show Hide Js Start ==========
    function initializePasswordToggle(toggleSelector) {
      $(toggleSelector).on('click', function () {
        $(this).toggleClass("ri-eye-off-line");
        var input = $($(this).attr("data-toggle"));
        if (input.attr("type") === "password") {
          input.attr("type", "text");
        } else {
          input.attr("type", "password");
        }
      });
    }
    // Call the function
    initializePasswordToggle('.toggle-password');
    // ========================= Password Show Hide Js End ===========================
  </script>


  <script>
    // Notification functions
    async function loadNotifications() {
      try {
        console.log('Loading notifications...');
        
        // Load unread count
        const countResponse = await maxicareAPI.getUnreadNotificationCount();
        if (countResponse && countResponse.status) {
          const countEl = document.getElementById('notificationCount');
          if (countEl) {
            countEl.textContent = countResponse.data.count;
          }
        }

        // Load recent notifications
        const notificationsResponse = await maxicareAPI.getNotifications(1, 5);
        if (notificationsResponse && notificationsResponse.status) {
          updateNotificationsList(notificationsResponse.data.notifications);
        } else {
          showNoNotificationsMessage();
        }
      } catch (error) {
        console.error('Error loading notifications:', error);
        showNoNotificationsMessage();
      }
    }

    function updateNotificationsList(notifications) {
      const notificationsList = document.getElementById('notificationsList');
      if (!notificationsList) return;

      if (notifications.length === 0) {
        showNoNotificationsMessage();
        return;
      }

      notificationsList.innerHTML = notifications.map(notification => `
        <a href="javascript:void(0)" 
           class="px-24 py-12 d-flex align-items-start gap-3 mb-2 justify-content-between ${notification.isRead ? '' : 'bg-neutral-50'}"
           onclick="markNotificationAsRead(${notification.id})">
          <div class="text-black hover-bg-transparent hover-text-primary d-flex align-items-center gap-3">
            <span class="w-44-px h-44-px ${getNotificationIconClass(notification.type)} rounded-circle d-flex justify-content-center align-items-center flex-shrink-0">
              <iconify-icon icon="${getNotificationIcon(notification.type)}" class="icon text-xxl"></iconify-icon>
            </span>
            <div>
              <h6 class="text-md fw-semibold mb-4">${notification.title}</h6>
              <p class="mb-0 text-sm text-secondary-light text-w-200-px">${notification.message}</p>
            </div>
          </div>
          <span class="text-sm text-secondary-light flex-shrink-0">${formatTimeAgo(notification.createdAt)}</span>
        </a>
      `).join('');
    }

    function showNoNotificationsMessage() {
      const notificationsList = document.getElementById('notificationsList');
      if (!notificationsList) return;

      notificationsList.innerHTML = `
        <div class="text-center py-4">
          <iconify-icon icon="solar:bell-outline" class="icon text-4xl text-secondary-light mb-2"></iconify-icon>
          <p class="text-secondary-light mb-0">No notifications</p>
        </div>
      `;
    }

    function getNotificationIcon(type) {
      const iconMap = {
        'shift_assigned': 'solar:clock-circle-outline',
        'shift_completed': 'solar:check-circle-outline',
        'shift_cancelled': 'solar:close-circle-outline',
        'user_registered': 'solar:user-plus-outline',
        'system_announcement': 'solar:megaphone-outline',
        'shift_reminder': 'solar:alarm-outline',
        'payment_processed': 'solar:wallet-outline',
        'profile_updated': 'solar:user-outline',
        'password_changed': 'solar:lock-outline',
        'login_attempt': 'solar:login-3-outline'
      };
      return iconMap[type] || 'solar:bell-outline';
    }

    function getNotificationIconClass(type) {
      const classMap = {
        'shift_assigned': 'bg-primary-subtle text-primary-main',
        'shift_completed': 'bg-success-subtle text-success-main',
        'shift_cancelled': 'bg-danger-subtle text-danger-main',
        'user_registered': 'bg-info-subtle text-info-main',
        'system_announcement': 'bg-warning-subtle text-warning-main',
        'shift_reminder': 'bg-warning-subtle text-warning-main',
        'payment_processed': 'bg-success-subtle text-success-main',
        'profile_updated': 'bg-info-subtle text-info-main',
        'password_changed': 'bg-warning-subtle text-warning-main',
        'login_attempt': 'bg-info-subtle text-info-main'
      };
      return classMap[type] || 'bg-secondary-subtle text-secondary-main';
    }

    async function markNotificationAsRead(notificationId) {
      try {
        await maxicareAPI.markNotificationAsRead(notificationId);
        // Reload notifications to update the UI
        await loadNotifications();
      } catch (error) {
        console.error('Error marking notification as read:', error);
      }
    }

    function formatTimeAgo(dateString) {
      if (!dateString) return 'N/A';
      const date = new Date(dateString);
      const now = new Date();
      const diffInMinutes = Math.floor((now - date) / (1000 * 60));
      if (diffInMinutes < 1) return 'Just now';
      if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
      if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;
      return `${Math.floor(diffInMinutes / 1440)}d ago`;
    }

    // Shift Reports functionality - redirect to view-shifts page
    function showShiftReports() {
      window.location.href = 'view-shifts.html';
    }
  </script>
</body>

</html>
